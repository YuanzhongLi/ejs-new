#include "../header-vmdl/patterns.vmdh"

#include "../header-vmdl/externc.vmdh"

(vmInstruction, needContext)
eq : (JSValue, JSValue) -> Special
eq (v1, v2) {
  if (v1 == v2) {
    return JS_TRUE;
  } else {
    top: match (v1, v2) {
      case (number v1 && number v2) {
        cdouble x1 = to_double(v1);
        cdouble x2 = to_double(v2);
        return x1 == x2 ? JS_TRUE : JS_FALSE;
      }
      case (true) {
        return JS_FALSE;
      }
    }
  }
}